import Entity
import Convert

class Player(Entity.Entity):
    
    def __init__(self, pos, imageurl):
        Entity.Entity.__init__(self, pos, imageurl=imageurl)
        self.max_speed = 0.25
        self.acceleration = 0.025 #fiddle with this until it seems good
    
    def update(self, world):
        old_chunk = Convert.world_to_chunk(self.pos[0])[1]
        hspeed = min(abs(self.vel[0] + self.acceleration * self.dir[0]), self.max_speed) * self.dir[0]
        vspeed = min(abs(self.vel[1] + self.acceleration * self.dir[1]), self.max_speed) * self.dir[1]
        self.vel = [hspeed, vspeed]
        super(Player, self).update(world)
        new_chunk = Convert.world_to_chunk(self.pos[0])[1]
        if new_chunk != old_chunk:
            world.load_chunks(new_chunk)